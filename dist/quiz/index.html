<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>T·ª´ v·ª±ng HSK | Luy·ªán quiz H√°n t·ª± - Pinyin</title>
    <meta
      name="description"
      content="Luy·ªán t·∫≠p t·ª´ v·ª±ng ti·∫øng Trung v·ªõi quiz H√°n t·ª± - Pinyin. H·ªó tr·ª£ HSK 1-3 v√† t·∫•t c·∫£ t·ª´ v·ª±ng."
    />
    <meta
      name="keywords"
      content="h·ªçc ti·∫øng trung, h√°n t·ª±, pinyin, HSK, quiz, luy·ªán n√≥i"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css?v=ui2025" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‰∏≠</text></svg>"
    />
  </head>

  <body>
    <div class="quiz">
        <header>
            <h1>üìñ T·ª´ v·ª±ng HSK</h1>
            <p class="author">T√°c gi·∫£: B√πi Giang Nam</p>
            <button id="ai-config-btn" class="ai-config-btn" type="button" onclick="showApiKeyDialog(); location.reload();">
                <span id="ai-status-icon">ü§ñ</span>
                <span id="ai-status-text">C·∫•u h√¨nh AI</span>
            </button>
        </header>

        <main>
            <!-- Dataset Selection -->
            <section class="dataset-section" aria-labelledby="dataset-heading">
                <h3 id="dataset-heading">Ch·ªçn b·ªô t·ª´:</h3>
                <div class="dataset-buttons" role="group" aria-label="Ch·ªçn b·ªô t·ª´ v·ª±ng">
                    <button class="dataset-btn" data-file="data/HSK1.csv" aria-label="T·∫£i b·ªô t·ª´ HSK 1 v·ªõi 150 t·ª´">HSK 1
                        (150 t·ª´)</button>
                    <button class="dataset-btn" data-file="data/HSK2.csv" aria-label="T·∫£i b·ªô t·ª´ HSK 2 v·ªõi 151 t·ª´">HSK 2
                        (151 t·ª´)</button>
                    <button class="dataset-btn" data-file="data/HSK3.csv" aria-label="T·∫£i b·ªô t·ª´ HSK 3 v·ªõi 296 t·ª´">HSK 3
                        (296 t·ª´)</button>
                    <button class="dataset-btn" data-file="data/all1-3.csv"
                        aria-label="T·∫£i t·∫•t c·∫£ t·ª´ HSK 1-3 v·ªõi 596 t·ª´">T·∫•t c·∫£ HSK 1-3 (596 t·ª´)</button>
                </div>
            </section>

            <!-- Mode Selection -->
            <section class="mode-section hidden" id="mode-section" aria-labelledby="mode-heading">
                <h3 id="mode-heading">Ch·ªçn ch·∫ø ƒë·ªô luy·ªán t·∫≠p:</h3>
                <div class="mode-buttons" role="group" aria-label="Ch·ªçn ch·∫ø ƒë·ªô luy·ªán t·∫≠p">
                    <button class="mode-btn active" data-mode="quiz" aria-label="Ch·∫ø ƒë·ªô tr·∫Øc nghi·ªám">
                        <span class="mode-icon">üéØ</span>
                        <span class="mode-name">Tr·∫Øc nghi·ªám</span>
                        <span class="mode-desc">Ch·ªçn pinyin ƒë√∫ng</span>
                    </button>
                    <button class="mode-btn" data-mode="easy" aria-label="Ch·∫ø ƒë·ªô d·ªÖ - nh·∫≠p pinyin">
                        <span class="mode-icon">‚úèÔ∏è</span>
                        <span class="mode-name">D·ªÖ</span>
                        <span class="mode-desc">Xem Â≠ó ‚Üí Nh·∫≠p pinyin</span>
                    </button>
                    <button class="mode-btn" data-mode="hard" aria-label="Ch·∫ø ƒë·ªô kh√≥ - vi·∫øt H√°n t·ª± v√† d·ªãch c√¢u">
                        <span class="mode-icon">üî•</span>
                        <span class="mode-name">Kh√≥</span>
                        <span class="mode-desc">Vi·∫øt Â≠ó + D·ªãch c√¢u</span>
                    </button>
                </div>
            </section>

            <div class="tips muted" role="note" aria-label="H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng">
                <strong>H∆∞·ªõng d·∫´n:</strong>
                <span id="tips-text">1‚Äì4 ƒë·ªÉ ch·ªçn ƒë√°p √°n; Enter/Space ƒë·ªÉ sang c√¢u ti·∫øp. Tr·∫£ l·ªùi sai ƒë∆∞·ª£c ch·ªçn l·∫°i.</span>
            </div>

            <div id="status" class="status muted" role="status" aria-live="polite">Ch·ªçn m·ªôt b·ªô t·ª´ ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªçc.</div>

            <!-- Quiz Card -->
            <section id="card" class="quiz-card hidden" aria-labelledby="quiz-heading">
                <h2 id="quiz-heading" class="sr-only">Ch·∫ø ƒë·ªô Quiz</h2>
                
                <!-- Display area - shows Hanzi or Pinyin based on mode -->
                <div id="hanzi" class="hanzi" role="img" aria-label="Ch·ªØ H√°n c·∫ßn ƒë·ªçc">Â≠ó</div>
                <div id="meaning-hint" class="meaning-hint hidden"></div>
                
                <!-- Multiple Choice Options (Quiz mode) -->
                <div id="options" class="options" role="radiogroup" aria-label="C√°c l·ª±a ch·ªçn pinyin"></div>
                
                <!-- Text Input Area (Easy mode) -->
                <div id="input-area" class="input-area hidden">
                    <div class="input-wrapper">
                        <input type="text" id="answer-input" class="answer-input" 
                               name="easy-pinyin-answer"
                               placeholder="Nh·∫≠p pinyin..." 
                               autocomplete="new-password" 
                               autocapitalize="off"
                               spellcheck="false"
                               data-form-type="other">
                        <button id="submit-btn" class="submit-btn" type="button">Ki·ªÉm tra</button>
                    </div>
                    <div class="hint-section">
                        <button id="hint-btn" class="hint-btn" type="button">üí° G·ª£i √Ω</button>
                        <span id="hint-text" class="hint-text hidden"></span>
                    </div>
                </div>
                
                <!-- Hard Mode: 2 Input Areas -->
                <div id="hard-input-area" class="hard-input-area hidden">
                    <!-- Part 1: Hanzi input -->
                    <div class="hard-part">
                        <div class="hard-part-label">1Ô∏è‚É£ Vi·∫øt l·∫°i H√°n t·ª± tr√™n: <span id="hanzi-meaning-hint" class="meaning-hint-inline"></span></div>
                        <div class="input-wrapper">
                            <input type="text" id="hanzi-input" class="answer-input hanzi-input-style" 
                                   name="hard-hanzi-input-xyz"
                                   placeholder="Vi·∫øt H√°n t·ª±..." 
                                   autocomplete="new-password" 
                                   autocapitalize="off"
                                   spellcheck="false"
                                   data-form-type="other"
                                   data-lpignore="true">
                            <span id="hanzi-input-status" class="input-status"></span>
                        </div>
                        <div class="hint-section">
                            <button id="hint-btn-hanzi" class="hint-btn small" type="button">üí° G·ª£i √Ω</button>
                            <span id="hint-text-hanzi" class="hint-text hidden"></span>
                        </div>
                    </div>
                    
                    <!-- Part 2: Full sentence input -->
                    <div class="hard-part">
                        <div class="hard-part-label">2Ô∏è‚É£ D·ªãch c√¢u sang ti·∫øng Trung:</div>
                        <div id="sentence-prompt" class="sentence-prompt"></div>
                        <div class="input-wrapper">
                            <input type="text" id="sentence-input" class="answer-input" 
                                   name="hard-sentence-input-abc"
                                   placeholder="Nh·∫≠p c√¢u ti·∫øng Trung..." 
                                   autocomplete="new-password" 
                                   autocapitalize="off"
                                   spellcheck="false"
                                   data-form-type="other"
                                   data-lpignore="true">
                            <span id="sentence-status" class="input-status"></span>
                        </div>
                        <div class="hint-section">
                            <button id="hint-btn-sentence" class="hint-btn small" type="button">üí° G·ª£i √Ω</button>
                            <span id="hint-text-sentence" class="hint-text hidden"></span>
                        </div>
                    </div>
                    
                    <button id="submit-hard-btn" class="submit-btn full-width" type="button">Ki·ªÉm tra c·∫£ hai</button>
                    
                    <!-- AI Feedback Box -->
                    <div id="ai-feedback" class="ai-feedback hidden">
                        <span class="ai-icon">ü§ñ</span>
                        <span class="ai-message"></span>
                    </div>
                </div>
                
                <!-- Feedback for input modes -->
                <div id="feedback" class="feedback hidden">
                    <span id="feedback-icon"></span>
                    <span id="feedback-text"></span>
                </div>
                
                <!-- Example Box -->
                <div id="example" class="example muted hidden" role="region" aria-label="Th√¥ng tin chi ti·∫øt">
                    <div><strong>H√°n t·ª±:</strong> <span id="exHanziAnswer"></span></div>
                    <div><strong>Pinyin:</strong> <span id="exPinyinAnswer"></span></div>
                    <div><strong>Nghƒ©a (VI):</strong> <span id="exMeaning"></span></div>
                    <div><strong>V√≠ d·ª•:</strong> <span id="exHanzi"></span></div>
                    <div><strong>Phi√™n √¢m:</strong> <span id="exPinyin"></span></div>
                    <div><strong>D·ªãch:</strong> <span id="exVi"></span></div>
                </div>
                
                <!-- Progress Bar -->
                <div class="bar">
                    <div id="progress" class="muted" aria-label="S·ªë c√¢u hi·ªán t·∫°i">C√¢u: 0</div>
                    <div id="score" class="score" aria-label="S·ªë c√¢u tr·∫£ l·ªùi ƒë√∫ng">ƒê√∫ng: 0</div>
                </div>
                
                <!-- Quiz Controls -->
                <div class="quiz-controls">
                    <button id="nextBtn" class="hidden" type="button" aria-label="Chuy·ªÉn sang c√¢u ti·∫øp theo">C√¢u ti·∫øp ‚ñ∂</button>
                </div>
            </section>

        </main>
    </div>

    <script src="config.js"></script>
    <script src="version.js"></script>
    <script src="script.js?v=ai2025"></script>
  </body>
</html>
